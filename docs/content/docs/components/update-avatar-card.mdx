---
title: <UpdateAvatarCard />
---

The `<UpdateAvatarCard />` component is a pre-built UI element for users to easily manage and update their avatar image. It seamlessly integrates with the `<AuthUIProvider />` and utilizes either a custom or built-in avatar upload implementation.

## Usage

Here's how to include the `<UpdateAvatarCard />` component within your custom settings page. If you don't provide an `uploadAvatar` function, the component will store the avatar image as a base64 string in database.

```tsx
import { UpdateAvatarCard } from "@daveyplate/better-auth-ui"

export default function CustomSettings() {
    return (
        <div className="flex flex-col gap-6">
            <UpdateAvatarCard />
        </div>
    )
}
```

To enable avatar support, you need to configure the `avatar` and optionally `uploadAvatar` properties within your `<AuthUIProvider />`:

```tsx title="providers.tsx"
"use client"

import { AuthUIProvider } from "@daveyplate/better-auth-ui"
import { authClient } from "@/lib/auth-client"
import { useRouter } from "next/navigation"
import Link from "next/link"

export const Providers = ({ children }: { children: React.ReactNode }) => {
    const router = useRouter()

    return (
        <AuthUIProvider
            authClient={authClient}
            navigate={router.push}
            replace={router.replace}
            onSessionChange={() => router.refresh()}
            avatar
            uploadAvatar={async (file: File) => {
                const formData = new FormData()
                formData.append("avatar", file)

                const res = await fetch("/api/uploadAvatar", {
                method: "POST",
                body: formData,
                })

                const { data } = await res.json()
                return data.url
            }}
            LinkComponent={Link}
        >
            {children}
        </AuthUIProvider>
    )
}
```

### Explanation of `uploadAvatar`

The `uploadAvatar` prop allows you to implement custom upload logic. Your custom upload logic should accept a `File` object containing the avatar image and return a Promise resolving to a URL pointing to the uploaded file. This method provides you complete flexibility to integrate your own storage solution or third-party cloud storage.

## Props Reference

These are the available props for `<UpdateAvatarCard />`:

<AutoTypeTable path="../src/components/settings/update-avatar-card.tsx" name="UpdateAvatarCardProps" />

### Custom Styling

The `classNames` prop is useful for customizing inner elements using Tailwind classes:

```tsx
<UpdateAvatarCard
    classNames={{
        base: "border-blue-500",
        avatar: {
            base: "border-4 border-blue-400",
            fallback: "bg-blue-400 text-white"
        },
        footer: "bg-blue-50"
    }}
/>
```

## Avatar Handling & Customization

Avatars are auto-cropped, optimized, and resized before uploading:

- **Cropping**: The image is automatically center-cropped into a square.
- **Sizing**: Default `avatarSize` is set to:
  - `128px` (when using built-in storage - base64)
  - `256px` (when using custom `uploadAvatar`)
- **File Format**: You can customize the uploaded image file format via `avatarExtension` prop in `<AuthUIProvider>`. It defaults to `"png"`.

## Example with Custom Storage (Presigned URL)

Here's an example demonstrating custom storage (AWS S3 / Presigned URL):

```tsx
<AuthUIProvider
    authClient={authClient}
    avatar
    avatarExtension="jpeg"
    avatarSize={256}
    uploadAvatar={async (file: File) => {
        const presignedUrlRes = await fetch("/api/request-presigned-url", {
            method: "POST",
            body: JSON.stringify({ name: file.name, type: file.type }),
        })

        const { url, fields, fileUrl } = await presignedUrlRes.json()

        const formData = new FormData()
        
        Object.keys(fields).forEach((key) => {
            formData.append(key, fields[key])
        })

        formData.append("file", file)

        await fetch(url, {
            method: "POST",
            body: formData,
        })

        return fileUrl
    }}
>
    {children}
</AuthUIProvider>
```

This implementation uses a presigned URL to securely upload images directly to a cloud storage provider.

---